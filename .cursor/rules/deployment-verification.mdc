---
description: Verificar que el deployment a Vercel sea correcto antes y después del push
globs: 
alwaysApply: false
---

# Verificación de deployment

## Antes del push

1. **Ejecutar build local**:
   ```bash
   npm run build
   ```
   Si falla, corregir errores antes de push.

2. **Errores comunes que rompen el deploy**:
   - Errores de TypeScript (type errors)
   - Imports inexistentes
   - Variables de entorno faltantes (Vercel las tiene; local usa `.env.local`)
   - Middleware con export incorrecto (Next.js espera `middleware` o default)

## Después del push (obligatorio)

**Verificar que el deploy se haya completado correctamente:**

1. **Listar deployments**:
   ```bash
   vercel ls
   ```
   El primer deployment debe mostrar **● Ready** (no ● Error).

2. **Comprobar producción** (opcional pero recomendado):
   - Hacer fetch de `https://watchily-ho.vercel.app/` y confirmar que responde 200 con contenido válido.

3. **Si el deploy falló**: Revisar el log en https://vercel.com → proyecto → Deployments → último deployment → Building. Corregir y volver a hacer push.

## Regla

**Antes de push: `npm run build` sin errores. Después de push: `vercel ls` y confirmar que el último deployment está ● Ready.**
