---
description: Flujo obligatorio tras cada cambio: build, commit, push, deploy, tv:package, tv:install
globs: 
alwaysApply: true
---

# TV - Flujo de actualización para probar en la TV

**Cada vez que hagas un cambio en el código**, ejecuta **todos** estos pasos en orden:

## 1. Build
```bash
npm run build
```
Corregir errores antes de continuar.

## 2. Commit y push
```bash
git add .
git commit -m "..."
git push origin main
```

## 3. Verificar deploy
```bash
vercel ls
```
Esperar hasta que el primer deployment muestre **● Ready**.

## 4. Reconstruir IPK
```bash
npm run tv:package
```
Genera `com.watchily.web_1.0.0_all.ipk` en la raíz del proyecto.

## 5. Instalar en la TV (el agente DEBE ejecutarlo, no pedir al usuario)
```bash
npm run tv:install
```
O con dispositivo: `ares-install com.watchily.web_1.0.0_all.ipk -d <nombre-tv>`

**El agente debe ejecutar `npm run tv:install` tras `tv:package`** para que el usuario pueda probar en la TV sin pasos manuales.

## Obligatorio
**El agente NUNCA debe decir "ya puedes probar en la TV" hasta haber ejecutado TODOS los pasos.** No dar por terminada la tarea hasta completar build, commit, push, vercel ls (● Ready), tv:package y tv:install. Esperar a que cada comando termine antes de pasar al siguiente (p. ej. el build puede tardar 1–2 min).

## Resumen – ejecutar en este orden
1. `npm run build` (esperar a que termine)
2. `git add .`
3. `git commit -m "..."`
4. `git push origin main`
5. `vercel ls` (esperar hasta ● Ready)
6. `npm run tv:package`
7. `npm run tv:install`

**No dar por terminada la tarea hasta completar los 7 pasos.**
