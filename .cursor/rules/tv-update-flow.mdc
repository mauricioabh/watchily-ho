---
description: Flujo completo para actualizar la app TV y probar en dispositivo
globs: 
alwaysApply: true
---

# TV - Flujo de actualización para probar en la TV

Cuando hagas cambios que afecten la app TV, ejecuta **todos** estos pasos:

## 1. Build
```bash
npm run build
```
Corregir errores antes de continuar.

## 2. Commit y push
```bash
git add .
git commit -m "..."
git push origin main
```

## 3. Verificar deploy
```bash
vercel ls
```
Esperar hasta que el primer deployment muestre **● Ready**.

## 4. Reconstruir IPK (si cambiaste lg-tv-hosted o para reinstalar)
```bash
npm run tv:package
```
Genera `com.watchily.web_1.0.0_all.ipk` en la raíz del proyecto.

## 5. Instalar en la TV (el agente DEBE ejecutarlo, no pedir al usuario)
```bash
npm run tv:install
```
O con dispositivo: `ares-install com.watchily.web_1.0.0_all.ipk -d <nombre-tv>`

**El agente debe ejecutar `npm run tv:install` tras `tv:package`** para que el usuario pueda probar en la TV sin pasos manuales.

## Obligatorio
**El agente NUNCA debe decir "ya puedes probar en la TV" hasta haber ejecutado TODOS los pasos.** No dar por terminada la tarea hasta completar build, commit, push, vercel ls (● Ready), tv:package y tv:install. Esperar a que cada comando termine antes de pasar al siguiente (p. ej. el build puede tardar 1–2 min).

## Resumen
**Build (esperar fin) → Commit → Push → vercel ls (● Ready) → npm run tv:package → npm run tv:install** (ejecutar todo, incluida la instalación)
