---
description: Reglas para páginas TV standalone (webOS): foco y navegación con control remoto
globs: src/app/**/*-standalone/**/*.ts, src/app/**/title-standalone/**/*.ts
alwaysApply: false
---

# TV Standalone - Foco y navegación

Al crear o modificar páginas TV standalone (HTML estático para webOS), aplicar siempre:

## Foco inicial
- **Páginas con formulario/input principal** (Buscar, Ver todo, Crear lista): usar `setTimeout(..., 1000–1200)` para dar foco al input tras cargar (el teclado en pantalla aparece antes que la página).
- **Páginas con contenido principal** (Inicio, Listas): foco en primer elemento del nav o primer tile/lista.
- Siempre dar foco explícito a un elemento al cargar; sin foco el usuario no puede navegar con el control.

## Navegación con flechas
- **ArrowDown desde nav** (índices 0–5): ir al **primer elemento del contenido** (input, filtro, primera lista, primer tile), no al siguiente ítem del nav.
- **ArrowUp desde primera fila de contenido**: volver al último ítem del nav (índice 5).
- **Nav** = 6 elementos: Inicio, Buscar, Listas, Ver todo, Config, Cerrar sesión.

## Estructura típica
```js
var f = document.querySelectorAll('.tv-nav a, .tv-nav button, [contenido]');
var navCount = 6;
// Down desde nav -> navCount (primer contenido)
// Down desde contenido -> según grid o lineal
// Up desde primera fila contenido -> navCount-1
```

## Elementos focusables
- Todo enlace/botón debe tener `tabindex="0"`.
- Incluir en el selector todos los elementos interactivos: nav, inputs, botones, tiles, listas.

## Tecla OK/Enter
- webOS puede no activar enlaces con Enter por defecto. Añadir handler explícito:
```js
if(e.key==='Enter'||e.key===' '){
  var el=document.activeElement;
  if(el&&el.tagName==='A'&&el.href){el.click();e.preventDefault();}
  return;
}
```

## Deploy
Tras cambios en TV: `npm run build`, commit, push, `vercel ls` hasta ver ● Ready.
