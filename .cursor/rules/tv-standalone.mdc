---
description: Reglas para páginas TV standalone (webOS): foco y navegación con control remoto
globs: src/app/**/*-standalone/**/*.ts, src/app/**/title-standalone/**/*.ts
alwaysApply: false
---

# TV Standalone - Foco y navegación

Al crear o modificar páginas TV standalone (HTML estático para webOS), aplicar siempre:

## Foco inicial (OBLIGATORIO en TODAS las páginas)
- **Sin foco inicial la página no es usable con el control remoto.** webOS puede no dar foco automáticamente.
- Usar **múltiples setTimeout** (ej: 800, 1200, 1800 ms) para reintentar el foco; la TV puede tardar en estar lista.
- **Páginas con tiles** (Ver todo, Inicio, Buscar): foco en primer tile tras delay.
- **Páginas con formulario** (Buscar, Crear lista): foco en input tras delay.
- **Páginas con contenido** (Detalle título): foco en primer botón/enlace del contenido (ej. Añadir a lista) tras delay.
- Siempre: `f[0]?.focus()` al cargar + `setTimeout(focusFirst, 800)` + `setTimeout(focusFirst, 1200)` + `setTimeout(focusFirst, 1800)`.

## Navegación con flechas
- **ArrowDown desde nav** (índices 0–5): ir al **primer elemento del contenido** (input, filtro, primera lista, primer tile), no al siguiente ítem del nav.
- **ArrowUp desde primera fila de contenido**: volver al último ítem del nav (índice 5).
- **Nav** = 6 elementos: Inicio, Buscar, Listas, Ver todo, Config, Cerrar sesión.

## Estructura típica
```js
var f = document.querySelectorAll('.tv-nav a, .tv-nav button, [contenido]');
var navCount = 6;
// Down desde nav -> navCount (primer contenido)
// Down desde contenido -> según grid o lineal
// Up desde primera fila contenido -> navCount-1
```

## Elementos focusables
- Todo enlace/botón debe tener `tabindex="0"`.
- Incluir en el selector todos los elementos interactivos: nav, inputs, botones, tiles, listas.

## Tecla OK/Enter
- webOS puede no activar enlaces con Enter por defecto. Añadir handler explícito:
```js
if(e.key==='Enter'||e.key===' '){
  var el=document.activeElement;
  if(el&&el.tagName==='A'&&el.href){el.click();e.preventDefault();}
  return;
}
```

## Deploy
Tras cambios en TV: `npm run build`, commit, push, `vercel ls` hasta ver ● Ready.
